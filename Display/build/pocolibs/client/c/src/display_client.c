/* --- Generated by genom 2.99.29. Do not edit -------------------------- */

#include "autoconf/acheader.h"

#include <stdio.h>

#include "h2devLib.h"
#include "posterLib.h"

#include "display/c/client.h"
#include "display_msglib.h"
#include "private.h"
#include "serialize.h"


/* --- local data ---------------------------------------------------------- */

int	genom_display_abort_activity_encode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_display_abort_activity_decode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_display_connect_port_encode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_display_connect_port_decode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_display_connect_service_encode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_display_connect_service_decode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_display_kill_encode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_display_kill_decode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_display_GetCurrentPosition_encode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_display_GetCurrentPosition_decode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_display_GetCurrentBattery_encode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_display_GetCurrentBattery_decode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_display_GetCurrentMap_encode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_display_GetCurrentMap_decode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_display_GetCurrentArena_encode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_display_GetCurrentArena_decode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_display_SendOrdersStop_encode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_display_SendOrdersStop_decode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_display_MonitoringStop_encode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_display_MonitoringStop_decode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_display_SendOrders_encode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_display_SendOrders_decode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_display_Monitoring_encode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_display_Monitoring_decode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_display_genom_state_decode(char *buffer,
		genom_state_component *dst);
int	genom_display_JS_decode(char *buffer,
		display_order *dst);


/* --- display_abort ---------------------------------------------------- */

static void
genom_display_client_abort_cb(genom_client h, int rqstid, int done,
                       genom_event report, void *output, const void *exdetail,
                       void *cb_data)
{
  (void)done; (void)report; (void)output;
  (void)exdetail; (void)cb_data; /* fix -Wunused-parameter */

  (void)pocolibs_clean(h, rqstid);
}

genom_event
genom_display_client_abort(genom_client h, int rqstid)
{
  int abrtid, rid;
  genom_event ex;
  int e;

  if (rqstid < 0 || rqstid >= h->nactive)
    return genom_no_such_activity(&h->context);
  if (h->active_rqst[rqstid].status == FREE)
    return genom_no_such_activity(&h->context);
  if (h->active_rqst[rqstid].status == WAITING_INTERMED_REPLY)
    return genom_syserr(&(genom_syserr_detail){.code = EAGAIN}, &h->context);

  ex = pocolibs_newrqst(h, 0, &abrtid);
  if (ex) return ex;

  e = csClientRqstSend(
    h->csid, DISPLAY_abort_activity_RQSTID,
    (char *)&h->active_rqst[rqstid].aid, 0,
    genom_display_abort_activity_encode, FALSE, 0, 0, &rid);
  if (e != OK) {
    genom_mwerr_detail d;
    h2getErrMsg(errnoGet(), d.what, sizeof(d.what));
    return genom_mwerr(&d, &h->context);
  }

  h->active_rqst[abrtid].info = genom_display_client_abort_activity_info;
  h->active_rqst[abrtid].rid = rid;
  h->active_rqst[abrtid].decode = genom_display_abort_activity_decode;
  h->active_rqst[abrtid].sentcb = NULL;
  h->active_rqst[abrtid].donecb = genom_display_client_abort_cb;
  h->active_rqst[abrtid].cb_data = NULL;
  h->active_rqst[abrtid].status = WAITING_FINAL_REPLY;

  return genom_ok;
}


/* --- display_abort_activity_rqst -------------------------------------- */

genom_event
genom_display_client_abort_activity_rqst(
  genom_client h,
  const struct genom_display_abort_activity_input *in,
  display_abort_activity_cb sentcb, display_abort_activity_cb donecb,
  void *cb_data,
  int *rqstid)
{
  genom_event ex;
  int rid;
  int e;
  assert(h);

  ex = pocolibs_newrqst(
    h, sizeof(struct genom_display_abort_activity_output), rqstid);
  if (ex) return ex;

  e = csClientRqstSend(
    h->csid, DISPLAY_abort_activity_RQSTID,
    (char *)in, 0, genom_display_abort_activity_encode,
    FALSE, 0, 0, &rid);
  if (e != OK) {
    genom_mwerr_detail d;
    h2getErrMsg(errnoGet(), d.what, sizeof(d.what));
    return genom_mwerr(&d, &h->context);
  }

  genom_display_client_abort_activity_init_output(
    h->active_rqst[*rqstid].output);
  h->active_rqst[*rqstid].info =
    genom_display_client_abort_activity_info;
  h->active_rqst[*rqstid].rid = rid;
  h->active_rqst[*rqstid].decode = genom_display_abort_activity_decode;
  h->active_rqst[*rqstid].sentcb = (genom_request_cb)sentcb;
  h->active_rqst[*rqstid].donecb = (genom_request_cb)donecb;
  h->active_rqst[*rqstid].cb_data = cb_data;
  h->active_rqst[*rqstid].status = WAITING_FINAL_REPLY;

  return genom_ok;
}


/* --- display_abort_activity_result ------------------------------------ */

genom_event
genom_display_client_abort_activity_result(
  genom_client h, int rqstid, genom_event *report,
  struct genom_display_abort_activity_output **out, void **exdetail)
{
  struct genom_client_request *a;
  genom_event s;
  void *p;

  if (rqstid < 0 || rqstid >= h->nactive)
    return genom_syserr(&(genom_syserr_detail){.code = ENOENT}, &h->context);

  a = &h->active_rqst[rqstid];
  if (a->info != genom_display_client_abort_activity_info)
    return genom_syserr(&(genom_syserr_detail){.code = ENOMSG}, &h->context);

  s = pocolibs_result(h, rqstid, report, &p, exdetail);
  if (s) return s;
  if (out) *out = p;
  return genom_ok;
}


/* --- display_connect_port_rqst ---------------------------------------- */

genom_event
genom_display_client_connect_port_rqst(
  genom_client h,
  const struct genom_display_connect_port_input *in,
  display_connect_port_cb sentcb, display_connect_port_cb donecb,
  void *cb_data,
  int *rqstid)
{
  genom_event ex;
  int rid;
  int e;
  assert(h);

  ex = pocolibs_newrqst(
    h, sizeof(struct genom_display_connect_port_output), rqstid);
  if (ex) return ex;

  e = csClientRqstSend(
    h->csid, DISPLAY_connect_port_RQSTID,
    (char *)in, 0, genom_display_connect_port_encode,
    FALSE, 0, 0, &rid);
  if (e != OK) {
    genom_mwerr_detail d;
    h2getErrMsg(errnoGet(), d.what, sizeof(d.what));
    return genom_mwerr(&d, &h->context);
  }

  genom_display_client_connect_port_init_output(
    h->active_rqst[*rqstid].output);
  h->active_rqst[*rqstid].info =
    genom_display_client_connect_port_info;
  h->active_rqst[*rqstid].rid = rid;
  h->active_rqst[*rqstid].decode = genom_display_connect_port_decode;
  h->active_rqst[*rqstid].sentcb = (genom_request_cb)sentcb;
  h->active_rqst[*rqstid].donecb = (genom_request_cb)donecb;
  h->active_rqst[*rqstid].cb_data = cb_data;
  h->active_rqst[*rqstid].status = WAITING_FINAL_REPLY;

  return genom_ok;
}


/* --- display_connect_port_result -------------------------------------- */

genom_event
genom_display_client_connect_port_result(
  genom_client h, int rqstid, genom_event *report,
  struct genom_display_connect_port_output **out, void **exdetail)
{
  struct genom_client_request *a;
  genom_event s;
  void *p;

  if (rqstid < 0 || rqstid >= h->nactive)
    return genom_syserr(&(genom_syserr_detail){.code = ENOENT}, &h->context);

  a = &h->active_rqst[rqstid];
  if (a->info != genom_display_client_connect_port_info)
    return genom_syserr(&(genom_syserr_detail){.code = ENOMSG}, &h->context);

  s = pocolibs_result(h, rqstid, report, &p, exdetail);
  if (s) return s;
  if (out) *out = p;
  return genom_ok;
}


/* --- display_connect_service_rqst ------------------------------------- */

genom_event
genom_display_client_connect_service_rqst(
  genom_client h,
  const struct genom_display_connect_service_input *in,
  display_connect_service_cb sentcb, display_connect_service_cb donecb,
  void *cb_data,
  int *rqstid)
{
  genom_event ex;
  int rid;
  int e;
  assert(h);

  ex = pocolibs_newrqst(
    h, sizeof(struct genom_display_connect_service_output), rqstid);
  if (ex) return ex;

  e = csClientRqstSend(
    h->csid, DISPLAY_connect_service_RQSTID,
    (char *)in, 0, genom_display_connect_service_encode,
    FALSE, 0, 0, &rid);
  if (e != OK) {
    genom_mwerr_detail d;
    h2getErrMsg(errnoGet(), d.what, sizeof(d.what));
    return genom_mwerr(&d, &h->context);
  }

  genom_display_client_connect_service_init_output(
    h->active_rqst[*rqstid].output);
  h->active_rqst[*rqstid].info =
    genom_display_client_connect_service_info;
  h->active_rqst[*rqstid].rid = rid;
  h->active_rqst[*rqstid].decode = genom_display_connect_service_decode;
  h->active_rqst[*rqstid].sentcb = (genom_request_cb)sentcb;
  h->active_rqst[*rqstid].donecb = (genom_request_cb)donecb;
  h->active_rqst[*rqstid].cb_data = cb_data;
  h->active_rqst[*rqstid].status = WAITING_FINAL_REPLY;

  return genom_ok;
}


/* --- display_connect_service_result ----------------------------------- */

genom_event
genom_display_client_connect_service_result(
  genom_client h, int rqstid, genom_event *report,
  struct genom_display_connect_service_output **out, void **exdetail)
{
  struct genom_client_request *a;
  genom_event s;
  void *p;

  if (rqstid < 0 || rqstid >= h->nactive)
    return genom_syserr(&(genom_syserr_detail){.code = ENOENT}, &h->context);

  a = &h->active_rqst[rqstid];
  if (a->info != genom_display_client_connect_service_info)
    return genom_syserr(&(genom_syserr_detail){.code = ENOMSG}, &h->context);

  s = pocolibs_result(h, rqstid, report, &p, exdetail);
  if (s) return s;
  if (out) *out = p;
  return genom_ok;
}


/* --- display_kill_rqst ------------------------------------------------ */

genom_event
genom_display_client_kill_rqst(
  genom_client h,
  const struct genom_display_kill_input *in,
  display_kill_cb sentcb, display_kill_cb donecb,
  void *cb_data,
  int *rqstid)
{
  genom_event ex;
  int rid;
  int e;
  assert(h);

  ex = pocolibs_newrqst(
    h, sizeof(struct genom_display_kill_output), rqstid);
  if (ex) return ex;

  e = csClientRqstSend(
    h->csid, DISPLAY_kill_RQSTID,
    (char *)in, 0, genom_display_kill_encode,
    FALSE, 0, 0, &rid);
  if (e != OK) {
    genom_mwerr_detail d;
    h2getErrMsg(errnoGet(), d.what, sizeof(d.what));
    return genom_mwerr(&d, &h->context);
  }

  genom_display_client_kill_init_output(
    h->active_rqst[*rqstid].output);
  h->active_rqst[*rqstid].info =
    genom_display_client_kill_info;
  h->active_rqst[*rqstid].rid = rid;
  h->active_rqst[*rqstid].decode = genom_display_kill_decode;
  h->active_rqst[*rqstid].sentcb = (genom_request_cb)sentcb;
  h->active_rqst[*rqstid].donecb = (genom_request_cb)donecb;
  h->active_rqst[*rqstid].cb_data = cb_data;
  h->active_rqst[*rqstid].status = WAITING_FINAL_REPLY;

  return genom_ok;
}


/* --- display_kill_result ---------------------------------------------- */

genom_event
genom_display_client_kill_result(
  genom_client h, int rqstid, genom_event *report,
  struct genom_display_kill_output **out, void **exdetail)
{
  struct genom_client_request *a;
  genom_event s;
  void *p;

  if (rqstid < 0 || rqstid >= h->nactive)
    return genom_syserr(&(genom_syserr_detail){.code = ENOENT}, &h->context);

  a = &h->active_rqst[rqstid];
  if (a->info != genom_display_client_kill_info)
    return genom_syserr(&(genom_syserr_detail){.code = ENOMSG}, &h->context);

  s = pocolibs_result(h, rqstid, report, &p, exdetail);
  if (s) return s;
  if (out) *out = p;
  return genom_ok;
}


/* --- display_GetCurrentPosition_rqst ---------------------------------- */

genom_event
genom_display_client_GetCurrentPosition_rqst(
  genom_client h,
  const struct genom_display_GetCurrentPosition_input *in,
  display_GetCurrentPosition_cb sentcb, display_GetCurrentPosition_cb donecb,
  void *cb_data,
  int *rqstid)
{
  genom_event ex;
  int rid;
  int e;
  assert(h);

  ex = pocolibs_newrqst(
    h, sizeof(struct genom_display_GetCurrentPosition_output), rqstid);
  if (ex) return ex;

  e = csClientRqstSend(
    h->csid, DISPLAY_GetCurrentPosition_RQSTID,
    (char *)in, 0, genom_display_GetCurrentPosition_encode,
    FALSE, 0, 0, &rid);
  if (e != OK) {
    genom_mwerr_detail d;
    h2getErrMsg(errnoGet(), d.what, sizeof(d.what));
    return genom_mwerr(&d, &h->context);
  }

  genom_display_client_GetCurrentPosition_init_output(
    h->active_rqst[*rqstid].output);
  h->active_rqst[*rqstid].info =
    genom_display_client_GetCurrentPosition_info;
  h->active_rqst[*rqstid].rid = rid;
  h->active_rqst[*rqstid].decode = genom_display_GetCurrentPosition_decode;
  h->active_rqst[*rqstid].sentcb = (genom_request_cb)sentcb;
  h->active_rqst[*rqstid].donecb = (genom_request_cb)donecb;
  h->active_rqst[*rqstid].cb_data = cb_data;
  h->active_rqst[*rqstid].status = WAITING_FINAL_REPLY;

  return genom_ok;
}


/* --- display_GetCurrentPosition_result -------------------------------- */

genom_event
genom_display_client_GetCurrentPosition_result(
  genom_client h, int rqstid, genom_event *report,
  struct genom_display_GetCurrentPosition_output **out, void **exdetail)
{
  struct genom_client_request *a;
  genom_event s;
  void *p;

  if (rqstid < 0 || rqstid >= h->nactive)
    return genom_syserr(&(genom_syserr_detail){.code = ENOENT}, &h->context);

  a = &h->active_rqst[rqstid];
  if (a->info != genom_display_client_GetCurrentPosition_info)
    return genom_syserr(&(genom_syserr_detail){.code = ENOMSG}, &h->context);

  s = pocolibs_result(h, rqstid, report, &p, exdetail);
  if (s) return s;
  if (out) *out = p;
  return genom_ok;
}


/* --- display_GetCurrentBattery_rqst ----------------------------------- */

genom_event
genom_display_client_GetCurrentBattery_rqst(
  genom_client h,
  const struct genom_display_GetCurrentBattery_input *in,
  display_GetCurrentBattery_cb sentcb, display_GetCurrentBattery_cb donecb,
  void *cb_data,
  int *rqstid)
{
  genom_event ex;
  int rid;
  int e;
  assert(h);

  ex = pocolibs_newrqst(
    h, sizeof(struct genom_display_GetCurrentBattery_output), rqstid);
  if (ex) return ex;

  e = csClientRqstSend(
    h->csid, DISPLAY_GetCurrentBattery_RQSTID,
    (char *)in, 0, genom_display_GetCurrentBattery_encode,
    FALSE, 0, 0, &rid);
  if (e != OK) {
    genom_mwerr_detail d;
    h2getErrMsg(errnoGet(), d.what, sizeof(d.what));
    return genom_mwerr(&d, &h->context);
  }

  genom_display_client_GetCurrentBattery_init_output(
    h->active_rqst[*rqstid].output);
  h->active_rqst[*rqstid].info =
    genom_display_client_GetCurrentBattery_info;
  h->active_rqst[*rqstid].rid = rid;
  h->active_rqst[*rqstid].decode = genom_display_GetCurrentBattery_decode;
  h->active_rqst[*rqstid].sentcb = (genom_request_cb)sentcb;
  h->active_rqst[*rqstid].donecb = (genom_request_cb)donecb;
  h->active_rqst[*rqstid].cb_data = cb_data;
  h->active_rqst[*rqstid].status = WAITING_FINAL_REPLY;

  return genom_ok;
}


/* --- display_GetCurrentBattery_result --------------------------------- */

genom_event
genom_display_client_GetCurrentBattery_result(
  genom_client h, int rqstid, genom_event *report,
  struct genom_display_GetCurrentBattery_output **out, void **exdetail)
{
  struct genom_client_request *a;
  genom_event s;
  void *p;

  if (rqstid < 0 || rqstid >= h->nactive)
    return genom_syserr(&(genom_syserr_detail){.code = ENOENT}, &h->context);

  a = &h->active_rqst[rqstid];
  if (a->info != genom_display_client_GetCurrentBattery_info)
    return genom_syserr(&(genom_syserr_detail){.code = ENOMSG}, &h->context);

  s = pocolibs_result(h, rqstid, report, &p, exdetail);
  if (s) return s;
  if (out) *out = p;
  return genom_ok;
}


/* --- display_GetCurrentMap_rqst --------------------------------------- */

genom_event
genom_display_client_GetCurrentMap_rqst(
  genom_client h,
  const struct genom_display_GetCurrentMap_input *in,
  display_GetCurrentMap_cb sentcb, display_GetCurrentMap_cb donecb,
  void *cb_data,
  int *rqstid)
{
  genom_event ex;
  int rid;
  int e;
  assert(h);

  ex = pocolibs_newrqst(
    h, sizeof(struct genom_display_GetCurrentMap_output), rqstid);
  if (ex) return ex;

  e = csClientRqstSend(
    h->csid, DISPLAY_GetCurrentMap_RQSTID,
    (char *)in, 0, genom_display_GetCurrentMap_encode,
    FALSE, 0, 0, &rid);
  if (e != OK) {
    genom_mwerr_detail d;
    h2getErrMsg(errnoGet(), d.what, sizeof(d.what));
    return genom_mwerr(&d, &h->context);
  }

  genom_display_client_GetCurrentMap_init_output(
    h->active_rqst[*rqstid].output);
  h->active_rqst[*rqstid].info =
    genom_display_client_GetCurrentMap_info;
  h->active_rqst[*rqstid].rid = rid;
  h->active_rqst[*rqstid].decode = genom_display_GetCurrentMap_decode;
  h->active_rqst[*rqstid].sentcb = (genom_request_cb)sentcb;
  h->active_rqst[*rqstid].donecb = (genom_request_cb)donecb;
  h->active_rqst[*rqstid].cb_data = cb_data;
  h->active_rqst[*rqstid].status = WAITING_FINAL_REPLY;

  return genom_ok;
}


/* --- display_GetCurrentMap_result ------------------------------------- */

genom_event
genom_display_client_GetCurrentMap_result(
  genom_client h, int rqstid, genom_event *report,
  struct genom_display_GetCurrentMap_output **out, void **exdetail)
{
  struct genom_client_request *a;
  genom_event s;
  void *p;

  if (rqstid < 0 || rqstid >= h->nactive)
    return genom_syserr(&(genom_syserr_detail){.code = ENOENT}, &h->context);

  a = &h->active_rqst[rqstid];
  if (a->info != genom_display_client_GetCurrentMap_info)
    return genom_syserr(&(genom_syserr_detail){.code = ENOMSG}, &h->context);

  s = pocolibs_result(h, rqstid, report, &p, exdetail);
  if (s) return s;
  if (out) *out = p;
  return genom_ok;
}


/* --- display_GetCurrentArena_rqst ------------------------------------- */

genom_event
genom_display_client_GetCurrentArena_rqst(
  genom_client h,
  const struct genom_display_GetCurrentArena_input *in,
  display_GetCurrentArena_cb sentcb, display_GetCurrentArena_cb donecb,
  void *cb_data,
  int *rqstid)
{
  genom_event ex;
  int rid;
  int e;
  assert(h);

  ex = pocolibs_newrqst(
    h, sizeof(struct genom_display_GetCurrentArena_output), rqstid);
  if (ex) return ex;

  e = csClientRqstSend(
    h->csid, DISPLAY_GetCurrentArena_RQSTID,
    (char *)in, 0, genom_display_GetCurrentArena_encode,
    FALSE, 0, 0, &rid);
  if (e != OK) {
    genom_mwerr_detail d;
    h2getErrMsg(errnoGet(), d.what, sizeof(d.what));
    return genom_mwerr(&d, &h->context);
  }

  genom_display_client_GetCurrentArena_init_output(
    h->active_rqst[*rqstid].output);
  h->active_rqst[*rqstid].info =
    genom_display_client_GetCurrentArena_info;
  h->active_rqst[*rqstid].rid = rid;
  h->active_rqst[*rqstid].decode = genom_display_GetCurrentArena_decode;
  h->active_rqst[*rqstid].sentcb = (genom_request_cb)sentcb;
  h->active_rqst[*rqstid].donecb = (genom_request_cb)donecb;
  h->active_rqst[*rqstid].cb_data = cb_data;
  h->active_rqst[*rqstid].status = WAITING_FINAL_REPLY;

  return genom_ok;
}


/* --- display_GetCurrentArena_result ----------------------------------- */

genom_event
genom_display_client_GetCurrentArena_result(
  genom_client h, int rqstid, genom_event *report,
  struct genom_display_GetCurrentArena_output **out, void **exdetail)
{
  struct genom_client_request *a;
  genom_event s;
  void *p;

  if (rqstid < 0 || rqstid >= h->nactive)
    return genom_syserr(&(genom_syserr_detail){.code = ENOENT}, &h->context);

  a = &h->active_rqst[rqstid];
  if (a->info != genom_display_client_GetCurrentArena_info)
    return genom_syserr(&(genom_syserr_detail){.code = ENOMSG}, &h->context);

  s = pocolibs_result(h, rqstid, report, &p, exdetail);
  if (s) return s;
  if (out) *out = p;
  return genom_ok;
}


/* --- display_SendOrdersStop_rqst -------------------------------------- */

genom_event
genom_display_client_SendOrdersStop_rqst(
  genom_client h,
  const struct genom_display_SendOrdersStop_input *in,
  display_SendOrdersStop_cb sentcb, display_SendOrdersStop_cb donecb,
  void *cb_data,
  int *rqstid)
{
  genom_event ex;
  int rid;
  int e;
  assert(h);

  ex = pocolibs_newrqst(
    h, sizeof(struct genom_display_SendOrdersStop_output), rqstid);
  if (ex) return ex;

  e = csClientRqstSend(
    h->csid, DISPLAY_SendOrdersStop_RQSTID,
    (char *)in, 0, genom_display_SendOrdersStop_encode,
    FALSE, 0, 0, &rid);
  if (e != OK) {
    genom_mwerr_detail d;
    h2getErrMsg(errnoGet(), d.what, sizeof(d.what));
    return genom_mwerr(&d, &h->context);
  }

  genom_display_client_SendOrdersStop_init_output(
    h->active_rqst[*rqstid].output);
  h->active_rqst[*rqstid].info =
    genom_display_client_SendOrdersStop_info;
  h->active_rqst[*rqstid].rid = rid;
  h->active_rqst[*rqstid].decode = genom_display_SendOrdersStop_decode;
  h->active_rqst[*rqstid].sentcb = (genom_request_cb)sentcb;
  h->active_rqst[*rqstid].donecb = (genom_request_cb)donecb;
  h->active_rqst[*rqstid].cb_data = cb_data;
  h->active_rqst[*rqstid].status = WAITING_FINAL_REPLY;

  return genom_ok;
}


/* --- display_SendOrdersStop_result ------------------------------------ */

genom_event
genom_display_client_SendOrdersStop_result(
  genom_client h, int rqstid, genom_event *report,
  struct genom_display_SendOrdersStop_output **out, void **exdetail)
{
  struct genom_client_request *a;
  genom_event s;
  void *p;

  if (rqstid < 0 || rqstid >= h->nactive)
    return genom_syserr(&(genom_syserr_detail){.code = ENOENT}, &h->context);

  a = &h->active_rqst[rqstid];
  if (a->info != genom_display_client_SendOrdersStop_info)
    return genom_syserr(&(genom_syserr_detail){.code = ENOMSG}, &h->context);

  s = pocolibs_result(h, rqstid, report, &p, exdetail);
  if (s) return s;
  if (out) *out = p;
  return genom_ok;
}


/* --- display_MonitoringStop_rqst -------------------------------------- */

genom_event
genom_display_client_MonitoringStop_rqst(
  genom_client h,
  const struct genom_display_MonitoringStop_input *in,
  display_MonitoringStop_cb sentcb, display_MonitoringStop_cb donecb,
  void *cb_data,
  int *rqstid)
{
  genom_event ex;
  int rid;
  int e;
  assert(h);

  ex = pocolibs_newrqst(
    h, sizeof(struct genom_display_MonitoringStop_output), rqstid);
  if (ex) return ex;

  e = csClientRqstSend(
    h->csid, DISPLAY_MonitoringStop_RQSTID,
    (char *)in, 0, genom_display_MonitoringStop_encode,
    FALSE, 0, 0, &rid);
  if (e != OK) {
    genom_mwerr_detail d;
    h2getErrMsg(errnoGet(), d.what, sizeof(d.what));
    return genom_mwerr(&d, &h->context);
  }

  genom_display_client_MonitoringStop_init_output(
    h->active_rqst[*rqstid].output);
  h->active_rqst[*rqstid].info =
    genom_display_client_MonitoringStop_info;
  h->active_rqst[*rqstid].rid = rid;
  h->active_rqst[*rqstid].decode = genom_display_MonitoringStop_decode;
  h->active_rqst[*rqstid].sentcb = (genom_request_cb)sentcb;
  h->active_rqst[*rqstid].donecb = (genom_request_cb)donecb;
  h->active_rqst[*rqstid].cb_data = cb_data;
  h->active_rqst[*rqstid].status = WAITING_FINAL_REPLY;

  return genom_ok;
}


/* --- display_MonitoringStop_result ------------------------------------ */

genom_event
genom_display_client_MonitoringStop_result(
  genom_client h, int rqstid, genom_event *report,
  struct genom_display_MonitoringStop_output **out, void **exdetail)
{
  struct genom_client_request *a;
  genom_event s;
  void *p;

  if (rqstid < 0 || rqstid >= h->nactive)
    return genom_syserr(&(genom_syserr_detail){.code = ENOENT}, &h->context);

  a = &h->active_rqst[rqstid];
  if (a->info != genom_display_client_MonitoringStop_info)
    return genom_syserr(&(genom_syserr_detail){.code = ENOMSG}, &h->context);

  s = pocolibs_result(h, rqstid, report, &p, exdetail);
  if (s) return s;
  if (out) *out = p;
  return genom_ok;
}


/* --- display_SendOrders_rqst ------------------------------------------ */

genom_event
genom_display_client_SendOrders_rqst(
  genom_client h,
  const struct genom_display_SendOrders_input *in,
  display_SendOrders_cb sentcb, display_SendOrders_cb donecb,
  void *cb_data,
  int *rqstid)
{
  genom_event ex;
  int rid;
  int e;
  assert(h);

  ex = pocolibs_newrqst(
    h, sizeof(struct genom_display_SendOrders_output), rqstid);
  if (ex) return ex;

  e = csClientRqstSend(
    h->csid, DISPLAY_SendOrders_RQSTID,
    (char *)in, 0, genom_display_SendOrders_encode,
    TRUE, 0, 0, &rid);
  if (e != OK) {
    genom_mwerr_detail d;
    h2getErrMsg(errnoGet(), d.what, sizeof(d.what));
    return genom_mwerr(&d, &h->context);
  }

  genom_display_client_SendOrders_init_output(
    h->active_rqst[*rqstid].output);
  h->active_rqst[*rqstid].info =
    genom_display_client_SendOrders_info;
  h->active_rqst[*rqstid].rid = rid;
  h->active_rqst[*rqstid].decode = genom_display_SendOrders_decode;
  h->active_rqst[*rqstid].sentcb = (genom_request_cb)sentcb;
  h->active_rqst[*rqstid].donecb = (genom_request_cb)donecb;
  h->active_rqst[*rqstid].cb_data = cb_data;
  h->active_rqst[*rqstid].status = WAITING_INTERMED_REPLY;

  return genom_ok;
}


/* --- display_SendOrders_result ---------------------------------------- */

genom_event
genom_display_client_SendOrders_result(
  genom_client h, int rqstid, genom_event *report,
  struct genom_display_SendOrders_output **out, void **exdetail)
{
  struct genom_client_request *a;
  genom_event s;
  void *p;

  if (rqstid < 0 || rqstid >= h->nactive)
    return genom_syserr(&(genom_syserr_detail){.code = ENOENT}, &h->context);

  a = &h->active_rqst[rqstid];
  if (a->info != genom_display_client_SendOrders_info)
    return genom_syserr(&(genom_syserr_detail){.code = ENOMSG}, &h->context);

  s = pocolibs_result(h, rqstid, report, &p, exdetail);
  if (s) return s;
  if (out) *out = p;
  return genom_ok;
}


/* --- display_Monitoring_rqst ------------------------------------------ */

genom_event
genom_display_client_Monitoring_rqst(
  genom_client h,
  const struct genom_display_Monitoring_input *in,
  display_Monitoring_cb sentcb, display_Monitoring_cb donecb,
  void *cb_data,
  int *rqstid)
{
  genom_event ex;
  int rid;
  int e;
  assert(h);

  ex = pocolibs_newrqst(
    h, sizeof(struct genom_display_Monitoring_output), rqstid);
  if (ex) return ex;

  e = csClientRqstSend(
    h->csid, DISPLAY_Monitoring_RQSTID,
    (char *)in, 0, genom_display_Monitoring_encode,
    TRUE, 0, 0, &rid);
  if (e != OK) {
    genom_mwerr_detail d;
    h2getErrMsg(errnoGet(), d.what, sizeof(d.what));
    return genom_mwerr(&d, &h->context);
  }

  genom_display_client_Monitoring_init_output(
    h->active_rqst[*rqstid].output);
  h->active_rqst[*rqstid].info =
    genom_display_client_Monitoring_info;
  h->active_rqst[*rqstid].rid = rid;
  h->active_rqst[*rqstid].decode = genom_display_Monitoring_decode;
  h->active_rqst[*rqstid].sentcb = (genom_request_cb)sentcb;
  h->active_rqst[*rqstid].donecb = (genom_request_cb)donecb;
  h->active_rqst[*rqstid].cb_data = cb_data;
  h->active_rqst[*rqstid].status = WAITING_INTERMED_REPLY;

  return genom_ok;
}


/* --- display_Monitoring_result ---------------------------------------- */

genom_event
genom_display_client_Monitoring_result(
  genom_client h, int rqstid, genom_event *report,
  struct genom_display_Monitoring_output **out, void **exdetail)
{
  struct genom_client_request *a;
  genom_event s;
  void *p;

  if (rqstid < 0 || rqstid >= h->nactive)
    return genom_syserr(&(genom_syserr_detail){.code = ENOENT}, &h->context);

  a = &h->active_rqst[rqstid];
  if (a->info != genom_display_client_Monitoring_info)
    return genom_syserr(&(genom_syserr_detail){.code = ENOMSG}, &h->context);

  s = pocolibs_result(h, rqstid, report, &p, exdetail);
  if (s) return s;
  if (out) *out = p;
  return genom_ok;
}



/* --- display_genom_state_port ----------------------------------------- */

genom_event
genom_display_client_genom_state_port(
  genom_client h,
  genom_state_component *data)
{
  static POSTER_ID id;
  int searched = 0;
  char *addr;
  int s;

  do {
    if (!id) {
      char name[H2_DEV_MAX_NAME];
      int n;

      n = snprintf(name, sizeof(name), "%s/genom_state", h->instance);
      if (n <= 0 || n >= (signed)sizeof(name))
        return genom_syserr(&(genom_syserr_detail){.code = ENAMETOOLONG},
                            &h->context);

      if (posterFind(name, &id) != OK) {
        genom_mwerr_detail d;
        h2getErrMsg(errnoGet(), d.what, sizeof(d.what));
        return genom_mwerr(&d, &h->context);
      }
      searched = 1;
    }

    if (posterTake(id, POSTER_READ) != OK) {
      genom_mwerr_detail d;
      int code = errnoGet();
      if (!searched && code == S_posterLib_POSTER_CLOSED) {
        id = NULL; continue /* try to refetch poster id */;
      }
      h2getErrMsg(code, d.what, sizeof(d.what));
      return genom_mwerr(&d, &h->context);
    }
    addr = posterAddr(id);
    s = genom_display_genom_state_decode(addr, data);
    posterGive(id);
    break;
  } while(1);

  if (s)
    return genom_syserr(&(genom_syserr_detail){.code = s}, &h->context);
  return genom_ok;
}


/* --- display_JS_port -------------------------------------------------- */

genom_event
genom_display_client_JS_port(
  genom_client h,
  display_order *data)
{
  static POSTER_ID id;
  int searched = 0;
  char *addr;
  int s;

  do {
    if (!id) {
      char name[H2_DEV_MAX_NAME];
      int n;

      n = snprintf(name, sizeof(name), "%s/JS", h->instance);
      if (n <= 0 || n >= (signed)sizeof(name))
        return genom_syserr(&(genom_syserr_detail){.code = ENAMETOOLONG},
                            &h->context);

      if (posterFind(name, &id) != OK) {
        genom_mwerr_detail d;
        h2getErrMsg(errnoGet(), d.what, sizeof(d.what));
        return genom_mwerr(&d, &h->context);
      }
      searched = 1;
    }

    if (posterTake(id, POSTER_READ) != OK) {
      genom_mwerr_detail d;
      int code = errnoGet();
      if (!searched && code == S_posterLib_POSTER_CLOSED) {
        id = NULL; continue /* try to refetch poster id */;
      }
      h2getErrMsg(code, d.what, sizeof(d.what));
      return genom_mwerr(&d, &h->context);
    }
    addr = posterAddr(id);
    s = genom_display_JS_decode(addr, data);
    posterGive(id);
    break;
  } while(1);

  if (s)
    return genom_syserr(&(genom_syserr_detail){.code = s}, &h->context);
  return genom_ok;
}

