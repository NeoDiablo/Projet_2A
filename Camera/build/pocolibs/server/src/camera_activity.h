/* --- Generated by genom 2.99.29. Do not edit -------------------------- */

#ifndef H_CAMERA_ACTIVITY
#define H_CAMERA_ACTIVITY

#include "typecopy.h"
#include "camera_parameters.h"

/* forward declaration */
struct genom_component_data;

enum genom_activity_status {
  ACT_VOID,	/* nothing */
  ACT_INIT,	/* in control task codels */
  ACT_RUN,	/* managed by exec task, running */
  ACT_STOP,	/* managed by exec task, stopping */
  ACT_ETHER	/* result available for control task */
};

struct genom_activity {
  int sid;	/* service number, -1 for permanent activity */
  int aid;	/* activity number */
  int rid;	/* csLib request id */

  enum genom_activity_status status;	/* current phase */
  int start, stop, pause;		/* status change request */
  genom_event state;			/* current FSM state */

  void *exdetail;			/* exception info, if any */
  const char *interruptedby;
};


/* === Service activity ==================================================== */


/* --- abort_activity --------------------------------------------------- */

/* activity data */
struct genom_camera_abort_activity_activity {
  struct genom_activity h;
  struct genom_camera_abort_activity_input in;
  struct genom_camera_abort_activity_output out;
};

/* input/output initializer */
static __inline__ void
genom_tinit_camera_abort_activity_activity(
  struct genom_camera_abort_activity_activity *a)
{
  genom_tinit_unsigned_long(
    &(a->in.activity));
}

/* input/output finalizer */
static __inline__ void
genom_tfini_camera_abort_activity_activity(
  struct genom_camera_abort_activity_activity *a)
{
  genom_tfini_unsigned_long(
    &(a->in.activity));
}


/* --- connect_port ----------------------------------------------------- */

/* activity data */
struct genom_camera_connect_port_activity {
  struct genom_activity h;
  struct genom_camera_connect_port_input in;
  struct genom_camera_connect_port_output out;
};

/* input/output initializer */
static __inline__ void
genom_tinit_camera_connect_port_activity(
  struct genom_camera_connect_port_activity *a)
{
  genom_tinit_string128(
    a->in.local);
  genom_tinit_string128(
    a->in.remote);
}

/* input/output finalizer */
static __inline__ void
genom_tfini_camera_connect_port_activity(
  struct genom_camera_connect_port_activity *a)
{
  genom_tfini_string128(
    a->in.local);
  genom_tfini_string128(
    a->in.remote);
}


/* --- connect_service -------------------------------------------------- */

/* activity data */
struct genom_camera_connect_service_activity {
  struct genom_activity h;
  struct genom_camera_connect_service_input in;
  struct genom_camera_connect_service_output out;
};

/* input/output initializer */
static __inline__ void
genom_tinit_camera_connect_service_activity(
  struct genom_camera_connect_service_activity *a)
{
  genom_tinit_string128(
    a->in.local);
  genom_tinit_string128(
    a->in.remote);
}

/* input/output finalizer */
static __inline__ void
genom_tfini_camera_connect_service_activity(
  struct genom_camera_connect_service_activity *a)
{
  genom_tfini_string128(
    a->in.local);
  genom_tfini_string128(
    a->in.remote);
}


/* --- kill ------------------------------------------------------------- */

/* activity data */
struct genom_camera_kill_activity {
  struct genom_activity h;
  struct genom_camera_kill_input in;
  struct genom_camera_kill_output out;
};

/* input/output initializer */
static __inline__ void
genom_tinit_camera_kill_activity(
  struct genom_camera_kill_activity *a)
{
  (void)a; /* fix -Wunused-parameter */
}

/* input/output finalizer */
static __inline__ void
genom_tfini_camera_kill_activity(
  struct genom_camera_kill_activity *a)
{
  (void)a; /* fix -Wunused-parameter */
}


/* --- GetCurrentPosition ----------------------------------------------- */

/* activity data */
struct genom_camera_GetCurrentPosition_activity {
  struct genom_activity h;
  struct genom_camera_GetCurrentPosition_input in;
  struct genom_camera_GetCurrentPosition_output out;
};

/* input/output initializer */
static __inline__ void
genom_tinit_camera_GetCurrentPosition_activity(
  struct genom_camera_GetCurrentPosition_activity *a)
{
  genom_tinit_t_camera_robot(
    &(a->out.position));
}

/* input/output finalizer */
static __inline__ void
genom_tfini_camera_GetCurrentPosition_activity(
  struct genom_camera_GetCurrentPosition_activity *a)
{
  genom_tfini_t_camera_robot(
    &(a->out.position));
}


/* --- GetCurrentMap ---------------------------------------------------- */

/* activity data */
struct genom_camera_GetCurrentMap_activity {
  struct genom_activity h;
  struct genom_camera_GetCurrentMap_input in;
  struct genom_camera_GetCurrentMap_output out;
};

/* input/output initializer */
static __inline__ void
genom_tinit_camera_GetCurrentMap_activity(
  struct genom_camera_GetCurrentMap_activity *a)
{
  genom_tinit_t_camera_map(
    &(a->out.image));
}

/* input/output finalizer */
static __inline__ void
genom_tfini_camera_GetCurrentMap_activity(
  struct genom_camera_GetCurrentMap_activity *a)
{
  genom_tfini_t_camera_map(
    &(a->out.image));
}


/* --- GetCurrentArena -------------------------------------------------- */

/* activity data */
struct genom_camera_GetCurrentArena_activity {
  struct genom_activity h;
  struct genom_camera_GetCurrentArena_input in;
  struct genom_camera_GetCurrentArena_output out;
};

/* input/output initializer */
static __inline__ void
genom_tinit_camera_GetCurrentArena_activity(
  struct genom_camera_GetCurrentArena_activity *a)
{
  genom_tinit_t_camera_arena(
    &(a->out.arene));
}

/* input/output finalizer */
static __inline__ void
genom_tfini_camera_GetCurrentArena_activity(
  struct genom_camera_GetCurrentArena_activity *a)
{
  genom_tfini_t_camera_arena(
    &(a->out.arene));
}


/* --- FilmStop --------------------------------------------------------- */

/* activity data */
struct genom_camera_FilmStop_activity {
  struct genom_activity h;
  struct genom_camera_FilmStop_input in;
  struct genom_camera_FilmStop_output out;
};

/* input/output initializer */
static __inline__ void
genom_tinit_camera_FilmStop_activity(
  struct genom_camera_FilmStop_activity *a)
{
  (void)a; /* fix -Wunused-parameter */
}

/* input/output finalizer */
static __inline__ void
genom_tfini_camera_FilmStop_activity(
  struct genom_camera_FilmStop_activity *a)
{
  (void)a; /* fix -Wunused-parameter */
}


/* --- StartFilm -------------------------------------------------------- */

/* activity data */
struct genom_camera_StartFilm_activity {
  struct genom_activity h;
  struct genom_camera_StartFilm_input in;
  struct genom_camera_StartFilm_output out;
};

/* input/output initializer */
static __inline__ void
genom_tinit_camera_StartFilm_activity(
  struct genom_camera_StartFilm_activity *a)
{
  (void)a; /* fix -Wunused-parameter */
}

/* input/output finalizer */
static __inline__ void
genom_tfini_camera_StartFilm_activity(
  struct genom_camera_StartFilm_activity *a)
{
  (void)a; /* fix -Wunused-parameter */
}



/* === Activities ========================================================== */

union genom_any_activity {
  struct genom_activity any;
  struct genom_camera_abort_activity_activity s_abort_activity;
  struct genom_camera_connect_port_activity s_connect_port;
  struct genom_camera_connect_service_activity s_connect_service;
  struct genom_camera_kill_activity s_kill;
  struct genom_camera_GetCurrentPosition_activity s_GetCurrentPosition;
  struct genom_camera_GetCurrentMap_activity s_GetCurrentMap;
  struct genom_camera_GetCurrentArena_activity s_GetCurrentArena;
  struct genom_camera_FilmStop_activity s_FilmStop;
  struct genom_camera_StartFilm_activity s_StartFilm;
};

struct genom_activities {
  union genom_any_activity a[16];
};

static inline size_t
genom_max_activities(void) {
  struct genom_activities *a;
  return sizeof(a->a)/sizeof(a->a[0]);
}

int	genom_camera_activity_alloc(struct genom_activities *activities);
void	genom_camera_activity_report(struct genom_component_data *self,
		struct genom_activity *a);
int	genom_camera_activity_encodex(char *buffer, int size, char *dst,
                int maxsize);
int	genom_camera_interrupt_reqd(struct genom_component_data *self,
		struct genom_activity *a);

#endif /* H_CAMERA_ACTIVITY */
