/* --- Generated by genom 2.99.29. Do not edit -------------------------- */

#include "autoconf/acheader.h"

#include <stdio.h>

#include "h2devLib.h"
#include "posterLib.h"

#include "camera/c/client.h"
#include "camera_msglib.h"
#include "private.h"
#include "serialize.h"


/* --- local data ---------------------------------------------------------- */

int	genom_camera_abort_activity_encode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_camera_abort_activity_decode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_camera_connect_port_encode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_camera_connect_port_decode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_camera_connect_service_encode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_camera_connect_service_decode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_camera_kill_encode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_camera_kill_decode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_camera_GetCurrentPosition_encode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_camera_GetCurrentPosition_decode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_camera_GetCurrentMap_encode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_camera_GetCurrentMap_decode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_camera_GetCurrentArena_encode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_camera_GetCurrentArena_decode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_camera_FilmStop_encode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_camera_FilmStop_decode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_camera_StartFilm_encode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_camera_StartFilm_decode(char *buffer, int size,
		char *dst, int maxsize);
int	genom_camera_genom_state_decode(char *buffer,
		genom_state_component *dst);
int	genom_camera_AR_decode(char *buffer,
		camera_arena *dst);
int	genom_camera_POS_decode(char *buffer,
		camera_robot *dst);
int	genom_camera_IM_decode(char *buffer,
		camera_map *dst);


/* --- camera_abort ----------------------------------------------------- */

static void
genom_camera_client_abort_cb(genom_client h, int rqstid, int done,
                       genom_event report, void *output, const void *exdetail,
                       void *cb_data)
{
  (void)done; (void)report; (void)output;
  (void)exdetail; (void)cb_data; /* fix -Wunused-parameter */

  (void)pocolibs_clean(h, rqstid);
}

genom_event
genom_camera_client_abort(genom_client h, int rqstid)
{
  int abrtid, rid;
  genom_event ex;
  int e;

  if (rqstid < 0 || rqstid >= h->nactive)
    return genom_no_such_activity(&h->context);
  if (h->active_rqst[rqstid].status == FREE)
    return genom_no_such_activity(&h->context);
  if (h->active_rqst[rqstid].status == WAITING_INTERMED_REPLY)
    return genom_syserr(&(genom_syserr_detail){.code = EAGAIN}, &h->context);

  ex = pocolibs_newrqst(h, 0, &abrtid);
  if (ex) return ex;

  e = csClientRqstSend(
    h->csid, CAMERA_abort_activity_RQSTID,
    (char *)&h->active_rqst[rqstid].aid, 0,
    genom_camera_abort_activity_encode, FALSE, 0, 0, &rid);
  if (e != OK) {
    genom_mwerr_detail d;
    h2getErrMsg(errnoGet(), d.what, sizeof(d.what));
    return genom_mwerr(&d, &h->context);
  }

  h->active_rqst[abrtid].info = genom_camera_client_abort_activity_info;
  h->active_rqst[abrtid].rid = rid;
  h->active_rqst[abrtid].decode = genom_camera_abort_activity_decode;
  h->active_rqst[abrtid].sentcb = NULL;
  h->active_rqst[abrtid].donecb = genom_camera_client_abort_cb;
  h->active_rqst[abrtid].cb_data = NULL;
  h->active_rqst[abrtid].status = WAITING_FINAL_REPLY;

  return genom_ok;
}


/* --- camera_abort_activity_rqst --------------------------------------- */

genom_event
genom_camera_client_abort_activity_rqst(
  genom_client h,
  const struct genom_camera_abort_activity_input *in,
  camera_abort_activity_cb sentcb, camera_abort_activity_cb donecb,
  void *cb_data,
  int *rqstid)
{
  genom_event ex;
  int rid;
  int e;
  assert(h);

  ex = pocolibs_newrqst(
    h, sizeof(struct genom_camera_abort_activity_output), rqstid);
  if (ex) return ex;

  e = csClientRqstSend(
    h->csid, CAMERA_abort_activity_RQSTID,
    (char *)in, 0, genom_camera_abort_activity_encode,
    FALSE, 0, 0, &rid);
  if (e != OK) {
    genom_mwerr_detail d;
    h2getErrMsg(errnoGet(), d.what, sizeof(d.what));
    return genom_mwerr(&d, &h->context);
  }

  genom_camera_client_abort_activity_init_output(
    h->active_rqst[*rqstid].output);
  h->active_rqst[*rqstid].info =
    genom_camera_client_abort_activity_info;
  h->active_rqst[*rqstid].rid = rid;
  h->active_rqst[*rqstid].decode = genom_camera_abort_activity_decode;
  h->active_rqst[*rqstid].sentcb = (genom_request_cb)sentcb;
  h->active_rqst[*rqstid].donecb = (genom_request_cb)donecb;
  h->active_rqst[*rqstid].cb_data = cb_data;
  h->active_rqst[*rqstid].status = WAITING_FINAL_REPLY;

  return genom_ok;
}


/* --- camera_abort_activity_result ------------------------------------- */

genom_event
genom_camera_client_abort_activity_result(
  genom_client h, int rqstid, genom_event *report,
  struct genom_camera_abort_activity_output **out, void **exdetail)
{
  struct genom_client_request *a;
  genom_event s;
  void *p;

  if (rqstid < 0 || rqstid >= h->nactive)
    return genom_syserr(&(genom_syserr_detail){.code = ENOENT}, &h->context);

  a = &h->active_rqst[rqstid];
  if (a->info != genom_camera_client_abort_activity_info)
    return genom_syserr(&(genom_syserr_detail){.code = ENOMSG}, &h->context);

  s = pocolibs_result(h, rqstid, report, &p, exdetail);
  if (s) return s;
  if (out) *out = p;
  return genom_ok;
}


/* --- camera_connect_port_rqst ----------------------------------------- */

genom_event
genom_camera_client_connect_port_rqst(
  genom_client h,
  const struct genom_camera_connect_port_input *in,
  camera_connect_port_cb sentcb, camera_connect_port_cb donecb,
  void *cb_data,
  int *rqstid)
{
  genom_event ex;
  int rid;
  int e;
  assert(h);

  ex = pocolibs_newrqst(
    h, sizeof(struct genom_camera_connect_port_output), rqstid);
  if (ex) return ex;

  e = csClientRqstSend(
    h->csid, CAMERA_connect_port_RQSTID,
    (char *)in, 0, genom_camera_connect_port_encode,
    FALSE, 0, 0, &rid);
  if (e != OK) {
    genom_mwerr_detail d;
    h2getErrMsg(errnoGet(), d.what, sizeof(d.what));
    return genom_mwerr(&d, &h->context);
  }

  genom_camera_client_connect_port_init_output(
    h->active_rqst[*rqstid].output);
  h->active_rqst[*rqstid].info =
    genom_camera_client_connect_port_info;
  h->active_rqst[*rqstid].rid = rid;
  h->active_rqst[*rqstid].decode = genom_camera_connect_port_decode;
  h->active_rqst[*rqstid].sentcb = (genom_request_cb)sentcb;
  h->active_rqst[*rqstid].donecb = (genom_request_cb)donecb;
  h->active_rqst[*rqstid].cb_data = cb_data;
  h->active_rqst[*rqstid].status = WAITING_FINAL_REPLY;

  return genom_ok;
}


/* --- camera_connect_port_result --------------------------------------- */

genom_event
genom_camera_client_connect_port_result(
  genom_client h, int rqstid, genom_event *report,
  struct genom_camera_connect_port_output **out, void **exdetail)
{
  struct genom_client_request *a;
  genom_event s;
  void *p;

  if (rqstid < 0 || rqstid >= h->nactive)
    return genom_syserr(&(genom_syserr_detail){.code = ENOENT}, &h->context);

  a = &h->active_rqst[rqstid];
  if (a->info != genom_camera_client_connect_port_info)
    return genom_syserr(&(genom_syserr_detail){.code = ENOMSG}, &h->context);

  s = pocolibs_result(h, rqstid, report, &p, exdetail);
  if (s) return s;
  if (out) *out = p;
  return genom_ok;
}


/* --- camera_connect_service_rqst -------------------------------------- */

genom_event
genom_camera_client_connect_service_rqst(
  genom_client h,
  const struct genom_camera_connect_service_input *in,
  camera_connect_service_cb sentcb, camera_connect_service_cb donecb,
  void *cb_data,
  int *rqstid)
{
  genom_event ex;
  int rid;
  int e;
  assert(h);

  ex = pocolibs_newrqst(
    h, sizeof(struct genom_camera_connect_service_output), rqstid);
  if (ex) return ex;

  e = csClientRqstSend(
    h->csid, CAMERA_connect_service_RQSTID,
    (char *)in, 0, genom_camera_connect_service_encode,
    FALSE, 0, 0, &rid);
  if (e != OK) {
    genom_mwerr_detail d;
    h2getErrMsg(errnoGet(), d.what, sizeof(d.what));
    return genom_mwerr(&d, &h->context);
  }

  genom_camera_client_connect_service_init_output(
    h->active_rqst[*rqstid].output);
  h->active_rqst[*rqstid].info =
    genom_camera_client_connect_service_info;
  h->active_rqst[*rqstid].rid = rid;
  h->active_rqst[*rqstid].decode = genom_camera_connect_service_decode;
  h->active_rqst[*rqstid].sentcb = (genom_request_cb)sentcb;
  h->active_rqst[*rqstid].donecb = (genom_request_cb)donecb;
  h->active_rqst[*rqstid].cb_data = cb_data;
  h->active_rqst[*rqstid].status = WAITING_FINAL_REPLY;

  return genom_ok;
}


/* --- camera_connect_service_result ------------------------------------ */

genom_event
genom_camera_client_connect_service_result(
  genom_client h, int rqstid, genom_event *report,
  struct genom_camera_connect_service_output **out, void **exdetail)
{
  struct genom_client_request *a;
  genom_event s;
  void *p;

  if (rqstid < 0 || rqstid >= h->nactive)
    return genom_syserr(&(genom_syserr_detail){.code = ENOENT}, &h->context);

  a = &h->active_rqst[rqstid];
  if (a->info != genom_camera_client_connect_service_info)
    return genom_syserr(&(genom_syserr_detail){.code = ENOMSG}, &h->context);

  s = pocolibs_result(h, rqstid, report, &p, exdetail);
  if (s) return s;
  if (out) *out = p;
  return genom_ok;
}


/* --- camera_kill_rqst ------------------------------------------------- */

genom_event
genom_camera_client_kill_rqst(
  genom_client h,
  const struct genom_camera_kill_input *in,
  camera_kill_cb sentcb, camera_kill_cb donecb,
  void *cb_data,
  int *rqstid)
{
  genom_event ex;
  int rid;
  int e;
  assert(h);

  ex = pocolibs_newrqst(
    h, sizeof(struct genom_camera_kill_output), rqstid);
  if (ex) return ex;

  e = csClientRqstSend(
    h->csid, CAMERA_kill_RQSTID,
    (char *)in, 0, genom_camera_kill_encode,
    FALSE, 0, 0, &rid);
  if (e != OK) {
    genom_mwerr_detail d;
    h2getErrMsg(errnoGet(), d.what, sizeof(d.what));
    return genom_mwerr(&d, &h->context);
  }

  genom_camera_client_kill_init_output(
    h->active_rqst[*rqstid].output);
  h->active_rqst[*rqstid].info =
    genom_camera_client_kill_info;
  h->active_rqst[*rqstid].rid = rid;
  h->active_rqst[*rqstid].decode = genom_camera_kill_decode;
  h->active_rqst[*rqstid].sentcb = (genom_request_cb)sentcb;
  h->active_rqst[*rqstid].donecb = (genom_request_cb)donecb;
  h->active_rqst[*rqstid].cb_data = cb_data;
  h->active_rqst[*rqstid].status = WAITING_FINAL_REPLY;

  return genom_ok;
}


/* --- camera_kill_result ----------------------------------------------- */

genom_event
genom_camera_client_kill_result(
  genom_client h, int rqstid, genom_event *report,
  struct genom_camera_kill_output **out, void **exdetail)
{
  struct genom_client_request *a;
  genom_event s;
  void *p;

  if (rqstid < 0 || rqstid >= h->nactive)
    return genom_syserr(&(genom_syserr_detail){.code = ENOENT}, &h->context);

  a = &h->active_rqst[rqstid];
  if (a->info != genom_camera_client_kill_info)
    return genom_syserr(&(genom_syserr_detail){.code = ENOMSG}, &h->context);

  s = pocolibs_result(h, rqstid, report, &p, exdetail);
  if (s) return s;
  if (out) *out = p;
  return genom_ok;
}


/* --- camera_GetCurrentPosition_rqst ----------------------------------- */

genom_event
genom_camera_client_GetCurrentPosition_rqst(
  genom_client h,
  const struct genom_camera_GetCurrentPosition_input *in,
  camera_GetCurrentPosition_cb sentcb, camera_GetCurrentPosition_cb donecb,
  void *cb_data,
  int *rqstid)
{
  genom_event ex;
  int rid;
  int e;
  assert(h);

  ex = pocolibs_newrqst(
    h, sizeof(struct genom_camera_GetCurrentPosition_output), rqstid);
  if (ex) return ex;

  e = csClientRqstSend(
    h->csid, CAMERA_GetCurrentPosition_RQSTID,
    (char *)in, 0, genom_camera_GetCurrentPosition_encode,
    FALSE, 0, 0, &rid);
  if (e != OK) {
    genom_mwerr_detail d;
    h2getErrMsg(errnoGet(), d.what, sizeof(d.what));
    return genom_mwerr(&d, &h->context);
  }

  genom_camera_client_GetCurrentPosition_init_output(
    h->active_rqst[*rqstid].output);
  h->active_rqst[*rqstid].info =
    genom_camera_client_GetCurrentPosition_info;
  h->active_rqst[*rqstid].rid = rid;
  h->active_rqst[*rqstid].decode = genom_camera_GetCurrentPosition_decode;
  h->active_rqst[*rqstid].sentcb = (genom_request_cb)sentcb;
  h->active_rqst[*rqstid].donecb = (genom_request_cb)donecb;
  h->active_rqst[*rqstid].cb_data = cb_data;
  h->active_rqst[*rqstid].status = WAITING_FINAL_REPLY;

  return genom_ok;
}


/* --- camera_GetCurrentPosition_result --------------------------------- */

genom_event
genom_camera_client_GetCurrentPosition_result(
  genom_client h, int rqstid, genom_event *report,
  struct genom_camera_GetCurrentPosition_output **out, void **exdetail)
{
  struct genom_client_request *a;
  genom_event s;
  void *p;

  if (rqstid < 0 || rqstid >= h->nactive)
    return genom_syserr(&(genom_syserr_detail){.code = ENOENT}, &h->context);

  a = &h->active_rqst[rqstid];
  if (a->info != genom_camera_client_GetCurrentPosition_info)
    return genom_syserr(&(genom_syserr_detail){.code = ENOMSG}, &h->context);

  s = pocolibs_result(h, rqstid, report, &p, exdetail);
  if (s) return s;
  if (out) *out = p;
  return genom_ok;
}


/* --- camera_GetCurrentMap_rqst ---------------------------------------- */

genom_event
genom_camera_client_GetCurrentMap_rqst(
  genom_client h,
  const struct genom_camera_GetCurrentMap_input *in,
  camera_GetCurrentMap_cb sentcb, camera_GetCurrentMap_cb donecb,
  void *cb_data,
  int *rqstid)
{
  genom_event ex;
  int rid;
  int e;
  assert(h);

  ex = pocolibs_newrqst(
    h, sizeof(struct genom_camera_GetCurrentMap_output), rqstid);
  if (ex) return ex;

  e = csClientRqstSend(
    h->csid, CAMERA_GetCurrentMap_RQSTID,
    (char *)in, 0, genom_camera_GetCurrentMap_encode,
    FALSE, 0, 0, &rid);
  if (e != OK) {
    genom_mwerr_detail d;
    h2getErrMsg(errnoGet(), d.what, sizeof(d.what));
    return genom_mwerr(&d, &h->context);
  }

  genom_camera_client_GetCurrentMap_init_output(
    h->active_rqst[*rqstid].output);
  h->active_rqst[*rqstid].info =
    genom_camera_client_GetCurrentMap_info;
  h->active_rqst[*rqstid].rid = rid;
  h->active_rqst[*rqstid].decode = genom_camera_GetCurrentMap_decode;
  h->active_rqst[*rqstid].sentcb = (genom_request_cb)sentcb;
  h->active_rqst[*rqstid].donecb = (genom_request_cb)donecb;
  h->active_rqst[*rqstid].cb_data = cb_data;
  h->active_rqst[*rqstid].status = WAITING_FINAL_REPLY;

  return genom_ok;
}


/* --- camera_GetCurrentMap_result -------------------------------------- */

genom_event
genom_camera_client_GetCurrentMap_result(
  genom_client h, int rqstid, genom_event *report,
  struct genom_camera_GetCurrentMap_output **out, void **exdetail)
{
  struct genom_client_request *a;
  genom_event s;
  void *p;

  if (rqstid < 0 || rqstid >= h->nactive)
    return genom_syserr(&(genom_syserr_detail){.code = ENOENT}, &h->context);

  a = &h->active_rqst[rqstid];
  if (a->info != genom_camera_client_GetCurrentMap_info)
    return genom_syserr(&(genom_syserr_detail){.code = ENOMSG}, &h->context);

  s = pocolibs_result(h, rqstid, report, &p, exdetail);
  if (s) return s;
  if (out) *out = p;
  return genom_ok;
}


/* --- camera_GetCurrentArena_rqst -------------------------------------- */

genom_event
genom_camera_client_GetCurrentArena_rqst(
  genom_client h,
  const struct genom_camera_GetCurrentArena_input *in,
  camera_GetCurrentArena_cb sentcb, camera_GetCurrentArena_cb donecb,
  void *cb_data,
  int *rqstid)
{
  genom_event ex;
  int rid;
  int e;
  assert(h);

  ex = pocolibs_newrqst(
    h, sizeof(struct genom_camera_GetCurrentArena_output), rqstid);
  if (ex) return ex;

  e = csClientRqstSend(
    h->csid, CAMERA_GetCurrentArena_RQSTID,
    (char *)in, 0, genom_camera_GetCurrentArena_encode,
    FALSE, 0, 0, &rid);
  if (e != OK) {
    genom_mwerr_detail d;
    h2getErrMsg(errnoGet(), d.what, sizeof(d.what));
    return genom_mwerr(&d, &h->context);
  }

  genom_camera_client_GetCurrentArena_init_output(
    h->active_rqst[*rqstid].output);
  h->active_rqst[*rqstid].info =
    genom_camera_client_GetCurrentArena_info;
  h->active_rqst[*rqstid].rid = rid;
  h->active_rqst[*rqstid].decode = genom_camera_GetCurrentArena_decode;
  h->active_rqst[*rqstid].sentcb = (genom_request_cb)sentcb;
  h->active_rqst[*rqstid].donecb = (genom_request_cb)donecb;
  h->active_rqst[*rqstid].cb_data = cb_data;
  h->active_rqst[*rqstid].status = WAITING_FINAL_REPLY;

  return genom_ok;
}


/* --- camera_GetCurrentArena_result ------------------------------------ */

genom_event
genom_camera_client_GetCurrentArena_result(
  genom_client h, int rqstid, genom_event *report,
  struct genom_camera_GetCurrentArena_output **out, void **exdetail)
{
  struct genom_client_request *a;
  genom_event s;
  void *p;

  if (rqstid < 0 || rqstid >= h->nactive)
    return genom_syserr(&(genom_syserr_detail){.code = ENOENT}, &h->context);

  a = &h->active_rqst[rqstid];
  if (a->info != genom_camera_client_GetCurrentArena_info)
    return genom_syserr(&(genom_syserr_detail){.code = ENOMSG}, &h->context);

  s = pocolibs_result(h, rqstid, report, &p, exdetail);
  if (s) return s;
  if (out) *out = p;
  return genom_ok;
}


/* --- camera_FilmStop_rqst --------------------------------------------- */

genom_event
genom_camera_client_FilmStop_rqst(
  genom_client h,
  const struct genom_camera_FilmStop_input *in,
  camera_FilmStop_cb sentcb, camera_FilmStop_cb donecb,
  void *cb_data,
  int *rqstid)
{
  genom_event ex;
  int rid;
  int e;
  assert(h);

  ex = pocolibs_newrqst(
    h, sizeof(struct genom_camera_FilmStop_output), rqstid);
  if (ex) return ex;

  e = csClientRqstSend(
    h->csid, CAMERA_FilmStop_RQSTID,
    (char *)in, 0, genom_camera_FilmStop_encode,
    FALSE, 0, 0, &rid);
  if (e != OK) {
    genom_mwerr_detail d;
    h2getErrMsg(errnoGet(), d.what, sizeof(d.what));
    return genom_mwerr(&d, &h->context);
  }

  genom_camera_client_FilmStop_init_output(
    h->active_rqst[*rqstid].output);
  h->active_rqst[*rqstid].info =
    genom_camera_client_FilmStop_info;
  h->active_rqst[*rqstid].rid = rid;
  h->active_rqst[*rqstid].decode = genom_camera_FilmStop_decode;
  h->active_rqst[*rqstid].sentcb = (genom_request_cb)sentcb;
  h->active_rqst[*rqstid].donecb = (genom_request_cb)donecb;
  h->active_rqst[*rqstid].cb_data = cb_data;
  h->active_rqst[*rqstid].status = WAITING_FINAL_REPLY;

  return genom_ok;
}


/* --- camera_FilmStop_result ------------------------------------------- */

genom_event
genom_camera_client_FilmStop_result(
  genom_client h, int rqstid, genom_event *report,
  struct genom_camera_FilmStop_output **out, void **exdetail)
{
  struct genom_client_request *a;
  genom_event s;
  void *p;

  if (rqstid < 0 || rqstid >= h->nactive)
    return genom_syserr(&(genom_syserr_detail){.code = ENOENT}, &h->context);

  a = &h->active_rqst[rqstid];
  if (a->info != genom_camera_client_FilmStop_info)
    return genom_syserr(&(genom_syserr_detail){.code = ENOMSG}, &h->context);

  s = pocolibs_result(h, rqstid, report, &p, exdetail);
  if (s) return s;
  if (out) *out = p;
  return genom_ok;
}


/* --- camera_StartFilm_rqst -------------------------------------------- */

genom_event
genom_camera_client_StartFilm_rqst(
  genom_client h,
  const struct genom_camera_StartFilm_input *in,
  camera_StartFilm_cb sentcb, camera_StartFilm_cb donecb,
  void *cb_data,
  int *rqstid)
{
  genom_event ex;
  int rid;
  int e;
  assert(h);

  ex = pocolibs_newrqst(
    h, sizeof(struct genom_camera_StartFilm_output), rqstid);
  if (ex) return ex;

  e = csClientRqstSend(
    h->csid, CAMERA_StartFilm_RQSTID,
    (char *)in, 0, genom_camera_StartFilm_encode,
    TRUE, 0, 0, &rid);
  if (e != OK) {
    genom_mwerr_detail d;
    h2getErrMsg(errnoGet(), d.what, sizeof(d.what));
    return genom_mwerr(&d, &h->context);
  }

  genom_camera_client_StartFilm_init_output(
    h->active_rqst[*rqstid].output);
  h->active_rqst[*rqstid].info =
    genom_camera_client_StartFilm_info;
  h->active_rqst[*rqstid].rid = rid;
  h->active_rqst[*rqstid].decode = genom_camera_StartFilm_decode;
  h->active_rqst[*rqstid].sentcb = (genom_request_cb)sentcb;
  h->active_rqst[*rqstid].donecb = (genom_request_cb)donecb;
  h->active_rqst[*rqstid].cb_data = cb_data;
  h->active_rqst[*rqstid].status = WAITING_INTERMED_REPLY;

  return genom_ok;
}


/* --- camera_StartFilm_result ------------------------------------------ */

genom_event
genom_camera_client_StartFilm_result(
  genom_client h, int rqstid, genom_event *report,
  struct genom_camera_StartFilm_output **out, void **exdetail)
{
  struct genom_client_request *a;
  genom_event s;
  void *p;

  if (rqstid < 0 || rqstid >= h->nactive)
    return genom_syserr(&(genom_syserr_detail){.code = ENOENT}, &h->context);

  a = &h->active_rqst[rqstid];
  if (a->info != genom_camera_client_StartFilm_info)
    return genom_syserr(&(genom_syserr_detail){.code = ENOMSG}, &h->context);

  s = pocolibs_result(h, rqstid, report, &p, exdetail);
  if (s) return s;
  if (out) *out = p;
  return genom_ok;
}



/* --- camera_genom_state_port ------------------------------------------ */

genom_event
genom_camera_client_genom_state_port(
  genom_client h,
  genom_state_component *data)
{
  static POSTER_ID id;
  int searched = 0;
  char *addr;
  int s;

  do {
    if (!id) {
      char name[H2_DEV_MAX_NAME];
      int n;

      n = snprintf(name, sizeof(name), "%s/genom_state", h->instance);
      if (n <= 0 || n >= (signed)sizeof(name))
        return genom_syserr(&(genom_syserr_detail){.code = ENAMETOOLONG},
                            &h->context);

      if (posterFind(name, &id) != OK) {
        genom_mwerr_detail d;
        h2getErrMsg(errnoGet(), d.what, sizeof(d.what));
        return genom_mwerr(&d, &h->context);
      }
      searched = 1;
    }

    if (posterTake(id, POSTER_READ) != OK) {
      genom_mwerr_detail d;
      int code = errnoGet();
      if (!searched && code == S_posterLib_POSTER_CLOSED) {
        id = NULL; continue /* try to refetch poster id */;
      }
      h2getErrMsg(code, d.what, sizeof(d.what));
      return genom_mwerr(&d, &h->context);
    }
    addr = posterAddr(id);
    s = genom_camera_genom_state_decode(addr, data);
    posterGive(id);
    break;
  } while(1);

  if (s)
    return genom_syserr(&(genom_syserr_detail){.code = s}, &h->context);
  return genom_ok;
}


/* --- camera_AR_port --------------------------------------------------- */

genom_event
genom_camera_client_AR_port(
  genom_client h,
  camera_arena *data)
{
  static POSTER_ID id;
  int searched = 0;
  char *addr;
  int s;

  do {
    if (!id) {
      char name[H2_DEV_MAX_NAME];
      int n;

      n = snprintf(name, sizeof(name), "%s/AR", h->instance);
      if (n <= 0 || n >= (signed)sizeof(name))
        return genom_syserr(&(genom_syserr_detail){.code = ENAMETOOLONG},
                            &h->context);

      if (posterFind(name, &id) != OK) {
        genom_mwerr_detail d;
        h2getErrMsg(errnoGet(), d.what, sizeof(d.what));
        return genom_mwerr(&d, &h->context);
      }
      searched = 1;
    }

    if (posterTake(id, POSTER_READ) != OK) {
      genom_mwerr_detail d;
      int code = errnoGet();
      if (!searched && code == S_posterLib_POSTER_CLOSED) {
        id = NULL; continue /* try to refetch poster id */;
      }
      h2getErrMsg(code, d.what, sizeof(d.what));
      return genom_mwerr(&d, &h->context);
    }
    addr = posterAddr(id);
    s = genom_camera_AR_decode(addr, data);
    posterGive(id);
    break;
  } while(1);

  if (s)
    return genom_syserr(&(genom_syserr_detail){.code = s}, &h->context);
  return genom_ok;
}


/* --- camera_POS_port -------------------------------------------------- */

genom_event
genom_camera_client_POS_port(
  genom_client h,
  camera_robot *data)
{
  static POSTER_ID id;
  int searched = 0;
  char *addr;
  int s;

  do {
    if (!id) {
      char name[H2_DEV_MAX_NAME];
      int n;

      n = snprintf(name, sizeof(name), "%s/POS", h->instance);
      if (n <= 0 || n >= (signed)sizeof(name))
        return genom_syserr(&(genom_syserr_detail){.code = ENAMETOOLONG},
                            &h->context);

      if (posterFind(name, &id) != OK) {
        genom_mwerr_detail d;
        h2getErrMsg(errnoGet(), d.what, sizeof(d.what));
        return genom_mwerr(&d, &h->context);
      }
      searched = 1;
    }

    if (posterTake(id, POSTER_READ) != OK) {
      genom_mwerr_detail d;
      int code = errnoGet();
      if (!searched && code == S_posterLib_POSTER_CLOSED) {
        id = NULL; continue /* try to refetch poster id */;
      }
      h2getErrMsg(code, d.what, sizeof(d.what));
      return genom_mwerr(&d, &h->context);
    }
    addr = posterAddr(id);
    s = genom_camera_POS_decode(addr, data);
    posterGive(id);
    break;
  } while(1);

  if (s)
    return genom_syserr(&(genom_syserr_detail){.code = s}, &h->context);
  return genom_ok;
}


/* --- camera_IM_port --------------------------------------------------- */

genom_event
genom_camera_client_IM_port(
  genom_client h,
  camera_map *data)
{
  static POSTER_ID id;
  int searched = 0;
  char *addr;
  int s;

  do {
    if (!id) {
      char name[H2_DEV_MAX_NAME];
      int n;

      n = snprintf(name, sizeof(name), "%s/IM", h->instance);
      if (n <= 0 || n >= (signed)sizeof(name))
        return genom_syserr(&(genom_syserr_detail){.code = ENAMETOOLONG},
                            &h->context);

      if (posterFind(name, &id) != OK) {
        genom_mwerr_detail d;
        h2getErrMsg(errnoGet(), d.what, sizeof(d.what));
        return genom_mwerr(&d, &h->context);
      }
      searched = 1;
    }

    if (posterTake(id, POSTER_READ) != OK) {
      genom_mwerr_detail d;
      int code = errnoGet();
      if (!searched && code == S_posterLib_POSTER_CLOSED) {
        id = NULL; continue /* try to refetch poster id */;
      }
      h2getErrMsg(code, d.what, sizeof(d.what));
      return genom_mwerr(&d, &h->context);
    }
    addr = posterAddr(id);
    s = genom_camera_IM_decode(addr, data);
    posterGive(id);
    break;
  } while(1);

  if (s)
    return genom_syserr(&(genom_syserr_detail){.code = s}, &h->context);
  return genom_ok;
}

